<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!--
staccato-runner-mini.html (part of Era)
Copyright 2015 Ross Angle. Released under the MIT License.
-->
<title>Era Staccato demo</title>
</head>
<body>
<p><a href="https://github.com/rocketnia/era"
    >View the Era project on GitHub.</a></p>

<p>This page merely loads Staccato without actually using it for much.
Check the console to see if there are errors. If there aren't, great!
Nothing to see here.</p>

<script type="text/javascript" src="../fin/era-staccato-lib.stc.js">
    </script>
<script type="text/javascript" src="../src/era-misc-strmap-avl.js">
    </script>
<script type="text/javascript" src="../src/era-misc.js"></script>
<script type="text/javascript" src="../src/era-reader.js"></script>
<script type="text/javascript"
    src="../src/era-staccato-lib-runner-mini.js"></script>
<script type="text/javascript">"use strict";

window.onload = function () {
    function generateOutput() {
        var startMillis = new Date().getTime();
        
        var code =
            readAll( rocketnia.eraFiles[ "era-staccato-lib.stc" ] );
        var readMillis = new Date().getTime();
        
        arrAny( code, function ( tryExpr ) {
            if ( !tryExpr.ok ) {
                console.err( tryExpr.msg );
                return true;
            }
            
            processTopLevelReaderExpr( tryExpr.val );
            return false;
        } );
        
        
        var stopMillis = new Date().getTime();
        var runMillis = stopMillis - startMillis;
        // TODO: Either remove this or display it more prominently.
        console.log(
            "Ran for " + (stopMillis - startMillis) / 1000 + " " +
            "seconds, broken down as follows:" );
        console.log(
            "- Spent " + (readMillis - startMillis) / 1000 + " " +
            "seconds reading the code." );
        console.log(
            "- Spent " + (stopMillis - readMillis) / 1000 + " " +
            "seconds processing it." );
    }
    generateOutput();
};
</script>
</body>
</html>
